<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<title>CSS Preload Demo</title> 
</head>

<body>
  <form id="control">
    <h1>Enter Any CSS File on the Internet</h1>
    <input type="text" id="css" value="red.php" size="100" />
    <input type="submit" value="load" />
  </form>

  <div id="out"></div>

<script src="./mootools.js"></script>
<script src="./lib.js"></script>
<script>
window.addEvent('domready',function() {

    $('control').addEvent('submit',function(event) {

        event.stop();
        var css = $('css').get('value').trim() + '?t=' + new Date().getTime();
        if(css.length == 0) {
          alert('please enter a url');
          return;
        }

        new RemoteStyleSheet(css,{
    
          onReady : function(url) {
            print('we are ready = ' + url);
          },

          onError : function() {
            print('damn too bad');
          },

          onStart : function() {
            print('starting to download');
          }

        }).start();

    });

  function print(msg) {
    var p = document.createElement('P');
    p.appendChild(document.createTextNode(msg));
    document.getElementById('out').appendChild(p);
  }

});
</script>
</body>
</html>

